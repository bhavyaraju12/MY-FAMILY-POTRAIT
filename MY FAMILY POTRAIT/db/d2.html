<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <script src="https://cdn.tailwindcss.com"></script>
   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
   
   <!-- Web Fonts -->
   <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600&amp;subset=cyrillic,latin">

   <!-- CSS Global Compulsory -->
   <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
   <link rel="stylesheet" href="assets/css/style.css">

   <!-- CSS Header and Footer -->
   <link rel="stylesheet" href="assets/css/header.css">
   <link rel="stylesheet" href="assets/css/footer.css">

   <!-- CSS Implementing Plugins -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
   <link rel="stylesheet" href="assets/plugins/line-icons-pro/styles.css">
   <link rel="stylesheet" href="assets/plugins/line-icons/line-icons.css">
   <link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.min.css">

   <!-- CSS Customization -->
   <link rel="stylesheet" href="assets/css/custom.css">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600&subset=cyrillic,latin">
   <link href="/dist/output.css" rel="stylesheet">
</head>

<body class="bg-gray-100" style="background-color: #d7e2d1;">
   <button data-drawer-target="sidebar-multi-level-sidebar" data-drawer-toggle="sidebar-multi-level-sidebar"
      aria-controls="sidebar-multi-level-sidebar" type="button"
      class="inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-300 dark:focus:ring-gray-600">
      <span class="sr-only">Open sidebar</span>
      <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20"
         xmlns="http://www.w3.org/2000/svg">
         <path clip-rule="evenodd" fill-rule="evenodd"
            d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z">
         </path>
      </svg>
   </button>

   <aside id="sidebar-multi-level-sidebar"
      class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0"
      aria-label="Sidebar">

      <div class="h-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-white">
         <div class="p-4 border-b">
            <h1 class="text-xl color-green" style="color: #72c02c;">MY FAMILY PORTRAIT</h1>
         </div>
         <ul class="space-y-2 font-medium">
            <li>
               <a href="../form.html"
                  class="flex items-center p-2 text-gray-900 rounded-lg dark:text-black hover:bg-gray-200 dark:hover:bg-gray-300 group">
                  <img src="./35-personal-information.png" width="20px" height="20px" alt="">
                  <span class="ms-3" style=" font-family: 'Open Sans', sans-serif">Personal Information</span>
               </a>
            </li>
            <li>
               <a href="../Medihist.html"
                  class="flex items-center w-full p-2 text-base text-gray-900 transition duration-75 rounded-lg group hover:bg-gray-200 dark:text-black dark:hover:bg-gray-300"
                  aria-controls="dropdown-example" data-collapse-toggle="dropdown-example">
                  <img src="./3.png" width="20px" height="20px" alt="">
                  <span class="flex-1 ms-3 text-left rtl:text-right  whitespace-nowrap"
                     style=" font-family: 'Open Sans', sans-serif"> Medical Record</span>
               </a>
            </li>
            <li>
               <a href="../test.html"
                  class="flex items-center p-2 text-gray-900 rounded-lg dark:text-black hover:bg-gray-200 dark:hover:bg-gray-300 group">
                  <img src="./2.png" width="20px" height="20px" alt="">
                  <span class="flex-1 ms-3  whitespace-nowrap" style=" font-family: 'Open Sans', sans-serif">Test
                     Results</span>
               </a>
            </li>
            <li>
               <a href="../visit.html"
                  class="flex items-center p-2 text-gray-900 rounded-lg dark:text-black hover:bg-gray-200 dark:hover:bg-gray-300 group">
                  <img src="./docic.jpg" width="20px" height="20px" alt="">
                  <span class="flex-1 ms-3 whitespace-nowrap" style=" font-family: 'Open Sans', sans-serif">Doctor's
                     Visits</span>
               </a>
            </li>
            <!-- <li>
               <a href="../Medihist.html"
                  class="flex items-center p-2 text-gray-900 rounded-lg dark:text-black hover:bg-gray-200 dark:hover:bg-gray-300 group">
                  <img src="./fam.png" width="20px" height="20px" alt="">
                  <span class="flex-1 ms-3 whitespace-nowrap"  style=" font-family: 'Open Sans', sans-serif">Family Members</span>
               </a>
            </li> -->
            <li>
               <a href="../login.html"
                  class="flex items-center p-2 text-gray-900 rounded-lg dark:text-black hover:bg-gray-200 dark:hover:bg-gray-300 group">
                  <img src="./login.png" height="20px" width="20px" alt="">
                  <span class="flex-1 ms-3 whitespace-nowrap" style=" font-family: 'Open Sans', sans-serif">Log
                     Out</span>
               </a>
            </li>
         </ul>
      </div>
   </aside>

   <div class="p-10 sm:ml-64">
      <div class="p-20">
         <div class="container mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
               <!-- BP -->
               <!-- <div class="bg-white shadow rounded-lg p-6">
                  <h2 class="text-xl font-bold mb-4" style=" font-family: 'Open Sans', sans-serif">BP</h2>
                  <p class="text-2xl font-semibold">80/120</p> -->
               <!-- <div class="mt-4">
                     <canvas id="bp" class="w-full h-32"></canvas>
                  </div> -->
               <!-- </div> -->

               <!-- <div class="max-w-md mx-auto bg-white p-8 rounded-lg shadow-lg">
                  <h2 class="text-2xl font-bold mb-4">BP Chart</h2>
                  <form id="bpForm" class="mb-6">
                      <div class="mb-4">
                          <label for="month" class="block text-sm font-medium text-gray-700">Month</label>
                          <input type="text" id="month" class="mt-1 p-2 block w-full border border-gray-300 rounded-md" placeholder="Enter month (e.g., Jul)">
                      </div>
                      <div class="mb-4">
                          <label for="bpValue" class="block text-sm font-medium text-gray-700">BP Value</label>
                          <input type="number" id="bpValue" class="mt-1 p-2 block w-full border border-gray-300 rounded-md" placeholder="Enter BP value">
                      </div>
                      <button type="submit" class="w-full p-2 bg-blue-500 text-white rounded-md">Add BP Value</button>
                  </form>
                  <div>
                      <canvas id="bp" class="w-full h-32"></canvas>
                  </div>
               </div>
            -->
               <!-- </div> -->

               <!-- BMI -->

               <div class="max-w-md mx-auto bg-white p-8 rounded-lg shadow-lg">
                  <h1 class="text-lg font-semibold mb-2">BMI CALCULATOR</h1>
                  <p class="text-lg">Name: <span id="name" class="font-medium"></span></p>
                  <p class="text-lg">Height: <span id="height" class="font-medium"></span> meters</p>
                  <p class="text-lg">Weight: <span id="weight" class="font-medium"></span> kg</p>
                  <div style="background-color: #e7ede4;"
                     class="result bg-green-100 border border-green-200 text-green-700 p-4 mt-4 rounded-md" id="result">
                  </div>
               </div>


               <!-- Treatment History Card -->
               <div class="bg-white shadow rounded-lg p-6">
                  <h2 class="text-lg font-bold mb-4" style=" font-family: 'Open Sans', sans-serif">TREATMENT HISTORY
                  </h2>
                  <ul class="list-disc list-inside">
                     <li>Chief complaints</li>
                     <li>History of illness</li>
                     <li>Physical examination</li>
                     <li>Surgical history</li>
                     <li>Obstetric history</li>
                     <li>Medical allergies</li>
                  </ul>
               </div>

               <!-- Allergies -->
               <div class="bg-white shadow rounded-lg p-6">
                  <h2 class="text-lg font-bold mb-4" style=" font-family: 'Open Sans', sans-serif">ALLERGIES</h2>
                  <ul class="list-disc list-inside">
                     <li>Respiratory Allergies</li>
                     <li>Skin Allergies</li>
                  </ul>
               </div>

               <!--  Sugar Card -->
               <div class="max-w-md mx-auto bg-white p-8 rounded-lg shadow-lg">
                  <h2 class="text-lg font-semibold mb-4" style=" font-family: 'Open Sans', sans-serif">DIABETES CHART</h2>
                  <form id="diabetesForm" class="mb-6">
                     <div class="mb-4">
                        <label for="diabetesMonth" class="block text-sm font-medium text-gray-700">Month</label>
                        <input type="text" id="diabetesMonth"
                           class="mt-1 p-2 block w-full border border-gray-300 rounded-md"
                           placeholder="Enter month (e.g., Jul)">
                     </div>
                     <div class="mb-4">
                        <label for="diabetesValue" class="block text-sm font-medium text-gray-700">Diabetes
                           Value</label>
                        <input type="number" id="diabetesValue"
                           class="mt-1 p-2 block w-full border border-gray-300 rounded-md"
                           placeholder="Enter diabetes value">
                     </div>
                     <button type="submit" class="w-full p-2 bg-blue-500 text-white rounded-md">Add Diabetes
                        Value</button>
                  </form>
                  <div>
                     <canvas id="diabetes" class="w-full h-32"></canvas>
                  </div>
               </div>

               <!-- Appointments-->
               <div class="bg-white shadow rounded-lg p-6">
                  <div class="max-w-md mx-auto   rounded-lg ">
                     <h2  class="text-lg font-semibold mb-4">APPOINTMENT DETAILS</h2>
                     <div class="mb-4">
                         <p class="text-lg font-semibold">Doctor:</p>
                         <p class="text-gray-700">Dr. Jane Doe</p>
                     </div>
                     <div class="mb-4">
                         <p class="text-lg font-semibold">Date:</p>
                         <p class="text-gray-700">July 10, 2024</p>
                     </div>
                     <div class="mb-4">
                         <p class="text-lg font-semibold">Time:</p>
                         <p class="text-gray-700">10:00 AM</p>
                     </div>
                     <div>
                         <p class="text-lg font-semibold">Location:</p>
                         <p class="text-gray-700">123 Medical Center, Suite 456</p>
                     </div>
                 </div>
               </div>

               <!-- BP -->
               <div class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-lg">
                  <h2 class="text-lg font-semibold mb-4">BP CHART</h2>
                  <form id="bpForm" class="mb-6">
                     <div class="mb-4">
                        <label for="bpMonth" class="block text-sm font-medium text-gray-700">Month</label>
                        <input type="text" id="bpMonth" class="mt-1 p-2 block w-full border border-gray-300 rounded-md"
                           placeholder="Enter month (e.g., Jul)">
                     </div>
                     <div class="mb-4">
                        <label for="bpValue" class="block text-sm font-medium text-gray-700">BP Value</label>
                        <input type="number" id="bpValue"
                           class="mt-1 p-2 block w-full border border-gray-300 rounded-md" placeholder="Enter BP value">
                     </div>
                     <button type="submit" class="w-full p-2 bg-blue-500 text-white rounded-md">Add BP Value</button>
                  </form>
                  <div>
                     <canvas id="bp" class="w-full h-32"></canvas>
                  </div>
               </div>

            </div>
         </div>
      </div>
   </div>

   <script>
      /// Check if userID is stored in localStorage
const userID = localStorage.getItem('userID');

if (userID) {
   // Supabase credentials
   const key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5ia3BsbWZwZXJqdGVndWdjd3p6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTgxNzQzMDUsImV4cCI6MjAzMzc1MDMwNX0.u52UJNzNT3jEhLQCVfzyeqxSCVwlYgdT538pqDB9Ap0";
   const url = "https://nbkplmfperjtegugcwzz.supabase.co";

   // Fetch user details from Supabase
   fetch(`${url}/user/${userID}`, {
      method: 'GET',
      headers: {
         'Content-Type': 'application/json',
         'Authorization': `Bearer ${key}`
      }
   })
   .then(response => {
      if (!response.ok) {
         throw new Error('Network response was not ok');
      }
      return response.json();
   })
   .then(user => {
      // Populate user details
      document.getElementById('user-name').textContent = user.name;
      document.getElementById('user-email').textContent = user.email;
      // Add more fields as needed
   })
   .catch(error => {
      console.error('Error fetching user data:', error);
   });
} else {
   // Redirect to login page if userID is not found
   window.location.href = 'login.html';
}


      // Heart Rate Chart
      const heartRateCtx = document.getElementById('heartRateChart').getContext('2d');
      new Chart(heartRateCtx, {
         type: 'line',
         data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
               label: 'Heart Rate',
               data: [60, 70, 80, 75, 90, 85],
               borderColor: 'rgba(75, 192, 192, 1)',
               backgroundColor: 'rgba(75, 192, 192, 0.2)',
               fill: true,
            }]
         },
         options: {
            scales: {
               y: {
                  beginAtZero: true
               }
            }
         }
      });

         document.getElementById('bpForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const month = document.getElementById('month').value;
            const bpValue = document.getElementById('bpValue').value;

            if (month && bpValue) {
               bpChart.data.labels.push(month);
               bpChart.data.datasets[0].data.push(bpValue);
               bpChart.update();

               document.getElementById('month').value = '';
               document.getElementById('bpValue').value = '';
            }
         });
      });
      // BMI
      const user = {
         name: 'John Doe',
         height: 1.75, // in meters
         weight: 70   // in kilograms
      };

      function calculateBMI(height, weight) {
         return (weight / (height * height)).toFixed(2);
      }

      document.addEventListener('DOMContentLoaded', () => {
         const { name, height, weight } = user;
         const bmi = calculateBMI(height, weight);

         document.getElementById('name').textContent = name;
         document.getElementById('height').textContent = height;
         document.getElementById('weight').textContent = weight;
         document.getElementById('result').textContent = `Your BMI is ${bmi}`;
      });

      // SUGAR Chart
      const diabetesCtx = document.getElementById('diabetes').getContext('2d');
      const diabetesChart = new Chart(diabetesCtx, {
         type: 'line',
         data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
               label: 'Diabetes',
               data: [110, 120, 115, 118, 117, 119],
               borderColor: 'rgba(153, 102, 255, 1)',
               backgroundColor: 'rgba(153, 102, 255, 0.2)',
               fill: true,
            }]
         },
         options: {
            scales: {
               y: {
                  beginAtZero: true
               }
            }
         }
      });

      document.getElementById('diabetesForm').addEventListener('submit', (e) => {
         e.preventDefault();
         const month = document.getElementById('diabetesMonth').value;
         const diabetesValue = document.getElementById('diabetesValue').value;

         if (month && diabetesValue) {
            diabetesChart.data.labels.push(month);
            diabetesChart.data.datasets[0].data.push(diabetesValue);
            diabetesChart.update();

            document.getElementById('diabetesMonth').value = '';
            document.getElementById('diabetesValue').value = '';
         }
      });
   </script>
</body>
</html>